{% extends "base.html" %}

{% block title %}Sign In/Sign Up{% endblock %}

{% block content %}

  <meta charset="UTF-8">
  <title>Login & Registration Form</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link 
    rel="stylesheet" 
    href="{{ url_for('static', filename='stylelogin.css') }}"
  >

  <div class="cont">
    <!-- mobile toggle ALWAYS visible -->
    <div class="mobile-toggle">
      <button id="showSignIn" type="button" class="submit">Sign In</button>
      <button id="showSignUp" type="button" class="submit">Sign Up</button>
    </div>

    <!-- MOBILE SLIDER -->
    <div class="form-wrapper">
      <div class="form-container">
        <!-- mobile sign-in -->
        <div class="form sign-in mobile">
          <h2>Sign In</h2>
          <form method="POST" action="/signin">
          <label>
            <span>Email Address</span>
            <input type="email" name="email">
          </label>
          <label>
            <span>Password</span>
            <input type="password" name="password">
          </label>
          <button class="submit" type="submit">Sign In</button>
          </form>
          <a href="{{ url_for('admin') }}" class="btn btn-warning mt-3 w-100">Go to Admin Panel</a>
          <div class="social-media">
            <ul>
              <li>
<span class="material-symbols-outlined">
lock_person
</span>
              </li>
            </ul>
          </div>
        </div>

        <!-- mobile sign-up -->

        <div class="form sign-up mobile">
          <h2>Sign Up</h2>
        <form method="POST" action="/signup">
          <label>
            <span>Username</span>
            <input type="text" name="name">
          </label>
          <label>
            <span>Email</span>
            <input type="email" name="email">
          </label>
          <label>
            <span>Password</span>
            <input type="password" name="password">
          </label>
          <label>
            <span>Confirm Password</span>
            <input type="password" name="confirm_password">
          </label>
          <label>
            <span>Hobbies</span>
            <div id="hobbies-list-mobile">
             <div class="hobby-input-wrapper">
              <input type="text" name="hobbies[]" placeholder="Enter a hobby">
              <button type="button" class="remove-hobby-btn" onclick="this.parentNode.parentNode.removeChild(this.parentNode)">×</button>
            </div>
            </div>
            <button type="button" class="add-hobby-btn" onclick="addHobbyField('hobbies-list-mobile')">Add another hobby</button>
          </label>
          <button class="submit" type="confirm">Sign Up Now</button>
        </form>
        </div>
      </div>
    </div>

    <!-- DESKTOP SIGN-IN -->
    <div class="form sign-in desktop">
      <h2>Sign In</h2>
      <form method="POST" action="/signin">
      <label>
        <span>Email Address</span>
        <input type="email" name="email">
      </label>
      <label>
        <span>Password</span>
        <input type="password" name="password">
      </label>
      <button class="submit" type="submit">Sign In</button>
      </form>
      <a href="{{ url_for('admin') }}" class="btn btn-warning mt-3 w-100">Go to Admin Panel</a>
      <div class="social-media">
        <ul>
          <li>
<span class="material-symbols-outlined">
lock_person
</span>
          </li>
        </ul>
      </div>
    </div>

    <!-- DESKTOP PANEL (original) -->
    <div class="sub-cont desktop">
      <div class="img">
        <div class="img-text m-up">
          <h1>New here?</h1>
          <p>Sign up and discover.</p>
        </div>
        <div class="img-text m-in">
          <h1>One of us?</h1>
          <p>Just sign in</p>
        </div>
        <div class="img-btn">
          <span class="m-up">Sign Up</span>
          <span class="m-in">Sign In</span>
        </div>
      </div>
      <!-- original desktop sign-up -->
      <div class="form sign-up desktop">
        <h2>Sign Up</h2>
       <form method="POST" action="/signup">
        <label>
          <span>Username</span>
          <input type="text" name="name">
        </label>
        <label>
          <span>Email</span>
          <input type="email" name="email">
        </label>
        <label>
          <span>Password</span>
          <input type="password" name="password">
        </label>
        <label>
          <span>Confirm Password</span>
          <input type="password" name="confirm_password">
        </label>
        <!-- For desktop sign-up -->

        <label>
          <span>Hobbies</span>
            <div id="hobbies-list-desktop">
             <div class="hobby-input-wrapper">
               <input type="text" name="hobbies[]" placeholder="Enter a hobby">
               <button type="button" class="remove-hobby-btn" onclick="this.parentNode.parentNode.removeChild(this.parentNode)">×</button>
             </div>
            </div>
              <button type="button" class="add-hobby-btn" onclick="addHobbyField('hobbies-list-desktop')">Add another hobby</button>
        </label>
        <button class="submit" type="submit">Sign Up Now</button>
       </form>
      </div>
    </div>
  </div>

<script>
window.onload = function() {
  // If you have a toggle function, trigger it here
  // For example, if you use classes to show/hide forms:
  document.getElementById('showSignIn').click();
  // If you use a different mechanism, adjust accordingly
  // Also show the popup if needed
  var popup = document.getElementById('popup-alert');
  if (popup) popup.style.display = 'flex';
}
</script>

  <script src="{{ url_for('static', filename='app.js') }}"></script>


{% with messages = get_flashed_messages() %}
  {% if messages %}
    <div id="popup-alert" class="popup-alert">
      <div class="popup-content">
        {% for message in messages %}
          {{ message }}
        {% endfor %}
        <button onclick="document.getElementById('popup-alert').style.display='none'" class="popup-close">OK</button>
      </div>
    </div>
    <script>
      window.onload = function(){
        var popup = document.getElementById('popup-alert');
        if (popup) popup.style.display = 'flex';
      }
    </script>
  {% endif %}
{% endwith %}


{% endblock %}

