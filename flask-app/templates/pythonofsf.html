{% extends "base.html" %}

{% block title %}Pursuit{% endblock %}

{% block content %}
<div class="container mt-4">
    <header>
        <h1>Welcome to Pursuit!!</h1>
        <p>This is an app where users are free to socialise about their various hobbies and interests.</p>
        <p>Enter your name and favorite hobby below</p>
    </header>

    <form id="userForm" class="mb-4">
        <input type="text" id="name" class="form-control mb-2" placeholder="Your Name" required>
        <input type="text" id="hobby" class="form-control mb-2" placeholder="Your Hobby" required>
        <input type="text" id="email" class="form-control mb-2" placeholder="Your Email" required>
        <button type="submit" class="btn btn-primary">Submit</button>
    </form>

    <h2>Users</h2>
    <ul id="userList"></ul>
</div>

<script>
document.getElementById('userForm').addEventListener('submit', function(event) {
    event.preventDefault();
    const name = document.getElementById('name').value;
    const hobby = document.getElementById('hobby').value;
    const email = document.getElementById('email').value;
    if (name && hobby && email) {
        const users = JSON.parse(localStorage.getItem('users')) || [];
        users.push({ name, hobby, email });
        localStorage.setItem('users', JSON.stringify(users));
        const userList = document.getElementById('userList');
        const listItem = document.createElement('li');
        listItem.textContent = `${name} - ${hobby} - ${email}`;
        userList.appendChild(listItem);
        document.getElementById('name').value = '';
        document.getElementById('hobby').value = '';
        document.getElementById('email').value = '';
    } else {
        alert('Please fill in all fields');
    }
});

window.addEventListener('DOMContentLoaded', function() {
    const userList = document.getElementById('userList');
    const users = JSON.parse(localStorage.getItem('users')) || [];
    users.forEach(function(user) {
        const listItem = document.createElement('li');
        listItem.textContent = `${user.name} - ${user.hobby} - ${user.email}`;
        userList.appendChild(listItem);
    });
});
</script>
{% endblock %}